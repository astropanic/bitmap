<html>
  <head>
  </head>
  <body>
    <canvas id="map"></canvas>
    <div id="panel" style="float: right;"> </div>
  </body>
  <script type="text/javascript" src="src/bitmap.js"></script>
  <script type="text/javascript">
    var canvas = document.getElementById("map");
    var colors = [];
    var width  = 32;
    var height = 16;
    var size   = 24;
    var cwidth  = width * size;
    var cheight = height * size;
    canvas.width =  cwidth;
    canvas.height= cheight;
    var ctx  = canvas.getContext("2d");
    colors.push('red');
    colors.push('green');
    colors.push('blue');
    colors.push('yellow');
    colors.push('black');
    colors.push('gray');
    colors.push('purple');
    colors.push('orange');

    var panel = document.getElementById("panel");
    for(var i = 0; i< colors.length; i++){
      var div = document.createElement('div');
      div.style.backgroundColor = colors[i];
      div.style.width="24px";
      div.style.height="24px";
      div.onclick = function(){
        ctx.fillStyle = this.style.backgroundColor;
        ctx.fillRect(0*size,0*size,size,size);
      };
      panel.appendChild(div);
    }

    var rndcol = function(){
      return colors[Math.floor(Math.random()*colors.length)];
    };

    var map    = new Array(width);
    for(var i = 0; i < width; i++){
      map[i] = new Array(height);
    };

    for(var y = 0; y < height ; y++){
      for(var x = 0; x < width ; x++){
        map[x][y] = {color: rndcol()};
      }
    }

    for(y = 0; y < height ; y++){
      for(x = 0; x < width; x++){
        ctx.fillStyle = map[x][y].color;
        ctx.fillRect(x*size,y*size,size,size);
      }
    }

  </script>

</html>
